# Source: https://github.com/orgs/onflow/discussions/1330









Cadence Testing framework feedback 路 onflow 路 Discussion #1330 路 GitHub











[Skip to content](#start-of-content)




## Navigation Menu

Toggle navigation

 






[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Forgs%2Fonflow%2Fdiscussions%2F1330)


[onflow](/onflow)

* Product
  
  
  
  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)
  
  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions
  
  
  
  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)
  
  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)
  
  [View all solutions](/solutions)
* Resources
  
  
  
  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)
  
  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [Events & Webinars](https://resources.github.com)
  + [Ebooks & Whitepapers](https://github.com/resources/whitepapers)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source
  
  
  
  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise
  
  
  
  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)



Search or jump to...




# Search code, repositories, users, issues, pull requests...

 
Search




Clear
 







































 


[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax) 







# Provide feedback





 

We read every piece of feedback, and take your input very seriously.



Include my email address so I can be contacted


  Cancel

 Submit feedback



# Saved searches

## Use saved searches to filter your results more quickly





 

Name




Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

 




  Cancel

 Create saved search






[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Forgs%2Fonflow%2Fdiscussions%2F1330)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fdiscussions_fragments%2Fdiscussion_layout&source=header-repo&source_repo=onflow%2Fflow)
Reseting focus





You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.
 


Dismiss alert



{{ message }}





# [@onflow Flow](/onflow)


* [Overview](/onflow)
* [Repositories](/orgs/onflow/repositories)
* [Discussions](/orgs/onflow/discussions)
* [Projects](/orgs/onflow/projects)
* [Packages](/orgs/onflow/packages)
* [People](/orgs/onflow/people)

 


More


* [Overview](/onflow)
* [Repositories](/orgs/onflow/repositories)
* [Discussions](/orgs/onflow/discussions)
* [Projects](/orgs/onflow/projects)
* [Packages](/orgs/onflow/packages)
* [People](/orgs/onflow/people)







# Cadence Testing framework feedback #1330


[Answered](#discussioncomment-6170361)
by
[m-Peter](/m-Peter "m-Peter")
 
[austinkline](/austinkline)
asked this question in
[Developer Tooling](/orgs/onflow/discussions/categories/developer-tooling)







[Cadence Testing framework feedback](#top)
#1330

[![@austinkline](https://avatars.githubusercontent.com/u/8711160?s=40&v=4)
austinkline](/austinkline)

Apr 12, 2023
路
9 comments
路
5 replies





[Answered](#discussioncomment-6170361)
by
[m-Peter](/m-Peter "m-Peter")


 [Return to top](#top)







 


Discussion options






# {{title}}





 




Something went wrong.







 
Quote reply






 
edited






# {{editor}}'s edit





 {{actor}} deleted this content
.




# {{editor}}'s edit





 




Something went wrong.








## [austinkline](/austinkline) [Apr 12, 2023](#discussion-5078963)



 -
 


| I'm not sure which repo to put this in, so I figured I'd throw up a discussion! I'm really excited about the cadence testing framework, I've always been annoyed that I need to go through lots of other setup steps to get things like overflow and flow-js-testing to work. They aren't hard to do, but then I'm switching IDEs (I like jetbrains more than vs code for go and node). I also find it distracts and makes things harder to follow when you have to look through tests in one language, but the actual content I care about are the scripts. So all around it makes a lot of sense to me to focus on using and improving cadence's built-in testing  I recently started giving the cadence testing framework a try, and have a number of feedback items that I think would make it much more useful. Originally it was a [twitter thread](https://twitter.com/austin_flowty/status/1645928812394479618) but here are the items: Full VS Code support `import Test` isn't valid, so all of its type definitions fail to resolve:  [image](https://user-images.githubusercontent.com/8711160/231538535-060486b1-d125-44d6-a45a-545991df4828.png) Code Coverage I noticed that there is a flag for it, but it didn't work for me: [image](https://user-images.githubusercontent.com/8711160/231538619-783c63a1-f32a-4eb8-bab2-a56f6dd4eeb4.png) Log statements It would be great to get all log statements to get printed with some flag when running these tests. As of now, I have to put in a line like this: [image](https://user-images.githubusercontent.com/8711160/231538824-b1628be7-bcb7-4e91-874d-48f5dde91956.png)  Debug breakpoints would be great for this kind of iteration as well  Access to emitted events after running a transaction This one is super important imo, I was trying to start using these tests in a contract I'm working on, but I found it really hard to make any resource in a transaction, then find what its ID was. Control of the backend system's clock for testing out long-term flows. I can't use this testing framework to verify any of Flowty's loan/rental systems because we time things based on the current block's timestamp. We need a way to fast forward so we can test those kinds of things Ability to reference contract types It would be fantastic to be able to reference the contract types I've defined in my contracts so I can return them in scripts. I wasn't able to get that to work but maybe I'm just not doing the right thing. If this is indeed not supported, only being able to use cadence "primitive" types (not sure the right term here) is pretty limiting. For instance, I'd like to be able to resolve MetadataViews to test for compliance with the NFT Catalog. I could do that in a script, I suppose, maybe that's the suggested approach? Run some function after **every** test, or a way to snapshot and restore state Based on documentation, `tearDown` runs after all tests have been run, but I like to write my tests in such a way that each one is its own isolated sandbox. Right now, I don't have an easy way to basically "reset" the state of the chain before running every test. It's a little weird to me that I can't reset the state of the backend being used to ensure I'm operating on a clean slate Individual test files with a shared setup This could also just be me not knowing how to properly use this tool yet, but ideally I could define a `setup.cdc` and somehow import or have my tests automatically pick that up and use it. Then I can split my setup from my tests and start to define many test files to help inform a reader about what the intent of the test is that they're reading. If we can't split them up, it'll become a pretty heavy mental burden to follow 100+ cadence tests all in one file |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 


4
 You must be logged in to vote



 
3
 
 
All reactions

* 
  3






Answered by
[m-Peter](/m-Peter)

[Jun 14, 2023](https://github.com/orgs/onflow/discussions/1330#discussioncomment-6170361)

**Update:**

Regarding **Run some function after every test, or a way to snapshot and restore state:**  

We have added the necessary `beforeEach`/`afterEach` hooks and the `blockchain.reset()` method: [onflow/cadence-tools#128](https://github.com/onflow/cadence-tools/pull/128)

Regarding **Access to emitted events after running a transaction:**  

We have added this functionality as well: [onflow/cadence-tools#113](https://github.com/onflow/cadence-tools/pull/113)

Regarding **Ability to reference contract types:**  

We have added the ground work for this, we just need to figure out how to allow the import of these types in the test files. Probably we will need to phase the setup of the blockchain in a standalone step, preceding the tests execution.



[View full answer](#discussioncomment-6170361)









## Replies: 9 comments 路 5 replies


* [Oldest](/orgs/onflow/discussions/1330?sort=old)
* [Newest](/orgs/onflow/discussions/1330?sort=new)
* [Top](/orgs/onflow/discussions/1330?sort=top)



 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






### [m-Peter](/m-Peter) [Apr 12, 2023](#discussioncomment-5596156)



 -
 


| Hey [@austinkline](https://github.com/austinkline)   Very nice write up and the feedback is indeed quite legitimate   Regarding `Code Coverage`, we are working on it as part of a [grant proposal](https://github.com/onflow/developer-grants/issues/132). The issue which you described has been identified and resolved. We are just waiting for a new release of `flow-cli` (that includes this [PR](https://github.com/onflow/flow-cli/pull/969)), and you will be able to get coverage report for integration tests. Currently it is only supported for unit tests. The release will come with a few more handy features. Check them out [here](https://github.com/Build-Squad/flow-code-coverage/blob/385067c991608e7a37eba742bd857fab136ebeb0/README.md).  Regarding the feedback about the Cadence Testing Framework in general, we are also working on it as part of another [grant proposal](https://github.com/onflow/developer-grants/issues/148). Our starting point was the addition of [new matchers](https://github.com/onflow/cadence/pull/2420), and we will continue with the rest of the ideas described [here](https://github.com/onflow/cadence/issues/1889).  Some of your ideas are already described in the original issue, and we'll try to cater to them to accommodate any use case  For the rest, we'll have to investigate if they can form part of a follow-up grant. |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 


4
 You must be logged in to vote



 
All reactions





0 replies













 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






### [turbolent](/turbolent) [Apr 12, 2023](#discussioncomment-5596871) Maintainer



 -
 


| Opened [onflow/cadence-tools#102](https://github.com/onflow/cadence-tools/issues/102) and [onflow/cadence-tools#103](https://github.com/onflow/cadence-tools/issues/103) to track the language server and test framework improvements. |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 


1
 You must be logged in to vote



 
2
 
 
All reactions

* 
  2




0 replies













 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






### [m-Peter](/m-Peter) [Apr 14, 2023](#discussioncomment-5617817)



 -
 


| Hey [@austinkline](https://github.com/austinkline) , the latest [flow-cli](https://github.com/onflow/flow-cli/releases/tag/v0.49.0) should fix the code coverage issue that you faced. |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 


4
 You must be logged in to vote



 
All reactions





1 reply






[![@austinkline](https://avatars.githubusercontent.com/u/8711160?s=60&v=4)](/austinkline)
 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






#### [austinkline](/austinkline) [Apr 17, 2023](#discussioncomment-5638167) Author



 -
 


| Thanks for the update! I'll give it a try today |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 
1
 
 
All reactions

* 
  1




















 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






 
edited






# {{editor}}'s edit





 {{actor}} deleted this content
.




# {{editor}}'s edit





 




Something went wrong.








### [austinkline](/austinkline) [Apr 17, 2023](#discussioncomment-5638203) Author



 -
 


| Adding another suggestion or issue I've run into, I'm sure it's an easy fix. Is there a way to get access to accounts defined in my flow config? I'm writing a test that needs to start by adding flow tokens to an account's balance, but I'm not seeing a way to get access to the right account to do that.  Any ideas? |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 


2
 You must be logged in to vote



 
All reactions





2 replies






[![@m-Peter](https://avatars.githubusercontent.com/u/1778965?s=60&v=4)](/m-Peter)
 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






 
edited






# {{editor}}'s edit





 {{actor}} deleted this content
.




# {{editor}}'s edit





 




Something went wrong.








#### [m-Peter](/m-Peter) [Apr 18, 2023](#discussioncomment-5653134)



 -
 


| Have you checked the `useConfiguration` helper [method](https://github.com/onflow/cadence-tools/blob/master/test/test_framework_test.go#L2241-L2245)? Could you work around this by creating an account in the tests file, add the desired flow tokens to it, and then deploy whatever contract you want to this newly-created address?  Correct me if I'm wrong, maybe I have misunderstood your use-case here. We can always clarify it offline in our chat group, in order not to spam the people here  |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 
All reactions














[![@austinkline](https://avatars.githubusercontent.com/u/8711160?s=60&v=4)](/austinkline)
 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






#### [austinkline](/austinkline) [Apr 18, 2023](#discussioncomment-5654408) Author



 -
 


| So that helper method is unfortunately not going to cover accounts I don't control the deployment of (like the FlowToken account). How can I mint flow tokens to an account for testing an nft mint, for example?  As for `useConfiguration`, that method needs a lot of boilerplate [which I'm doing now](https://github.com/Flowtyio/restricted-child-account/blob/main/test/CapabilityFactory_tests.cdc#L63) but it doesn't give me access to what I need sometimes. Ideally, there is some kind of method like: `cadence blockchain.getAccount("FlowToken") // returns a Test.Account object which has the FlowToken contract deployed to it`  We can always clarify it offline in our chat group, in order not to spam the people here  Offline chats are great, I'm happy to do them! But we should make sure we always summarize findings so that people don't ask for duplicate things. It's hard to gauge demand for features in a non-public setting but I can start making individual posts for things as they come up in the future |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 
All reactions





















 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






### [AmarildoGrembi](/AmarildoGrembi) [Apr 22, 2023](#discussioncomment-5694928)



 -
 


| hey everyone, if you are using code coverage please spare few seconds of your time to fill this survey to help us make it more feature rich! <https://forms.gle/Cw9kqh5JAAur4h6PA> |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 


2
 You must be logged in to vote



 
All reactions





0 replies













 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






### [franklywatson](/franklywatson) [Apr 24, 2023](#discussioncomment-5711444) Maintainer



 -
 


| HI [@AmarildoGrembi](https://github.com/AmarildoGrembi) - please feel free to share in discord as well! Thanks |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 


1
 You must be logged in to vote



 
All reactions





2 replies






[![@AmarildoGrembi](https://avatars.githubusercontent.com/u/8199202?s=60&v=4)](/AmarildoGrembi)
 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






 
edited






# {{editor}}'s edit





 {{actor}} deleted this content
.




# {{editor}}'s edit





 




Something went wrong.








#### [AmarildoGrembi](/AmarildoGrembi) [Apr 24, 2023](#discussioncomment-5712738)



 -
 


| I have done so in the [developers channel](https://discord.com/channels/613813861610684416/621847426201944074/1098650406361509969) and other Flow related communities. My impression is that it has not reached a bigger audience so far. Any suggestion is much appreciated  |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 
All reactions














[![@franklywatson](https://avatars.githubusercontent.com/u/128842?s=60&v=4)](/franklywatson)
 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






#### [franklywatson](/franklywatson) [Apr 24, 2023](#discussioncomment-5713439) Maintainer



 -
 


| My bad, I didn't realize. yeah it's tricky. Let me ask Luke to tweet it thanks |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 
All reactions





















 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






 
edited






# {{editor}}'s edit





 {{actor}} deleted this content
.




# {{editor}}'s edit





 




Something went wrong.








### [m-Peter](/m-Peter) [May 6, 2023](#discussioncomment-5824520)



 -
 


| **Update:**  Regarding **Full VS Code support**: A fix has been merged: [onflow/cadence-tools#111](https://github.com/onflow/cadence-tools/pull/111). It will probably be included in the next version bump of `cadence-tools/lint` & `flow-cli`   Regarding **Code Coverage**: This is already available and fully functional, for both unit / integration tests, with `flow-cli@v1.0.2`. See example: [onflow/cadence#2485](https://github.com/onflow/cadence/pull/2485)  Regarding **Log statements**: This is already merged ([onflow/cadence-tools#109](https://github.com/onflow/cadence-tools/pull/109)). It will probably be included in the next version bump of `cadence-tools/test` & `flow-cli`  |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 


2
 You must be logged in to vote



 
All reactions





0 replies













 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






 
edited






# {{editor}}'s edit





 {{actor}} deleted this content
.




# {{editor}}'s edit





 




Something went wrong.








### [m-Peter](/m-Peter) [May 19, 2023](#discussioncomment-5945626)



 -
 


| **Update:**  Regarding **Individual test files with a shared setup:** A fix has been merged [onflow/flow-cli#1030](https://github.com/onflow/flow-cli/pull/1030) |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 


2
 You must be logged in to vote



 
All reactions





0 replies













 


Comment options






# {{title}}





 




Something went wrong.







 
Quote reply






### [m-Peter](/m-Peter) [Jun 14, 2023](#discussioncomment-6170361)



 -
 


| **Update:**  Regarding **Run some function after every test, or a way to snapshot and restore state:** We have added the necessary `beforeEach`/`afterEach` hooks and the `blockchain.reset()` method: [onflow/cadence-tools#128](https://github.com/onflow/cadence-tools/pull/128)  Regarding **Access to emitted events after running a transaction:** We have added this functionality as well: [onflow/cadence-tools#113](https://github.com/onflow/cadence-tools/pull/113)  Regarding **Ability to reference contract types:** We have added the ground work for this, we just need to figure out how to allow the import of these types in the test files. Probably we will need to phase the setup of the blockchain in a standalone step, preceding the tests execution. |
| --- |

Beta
Was this translation helpful?
[Give feedback.](#)


 

Marked as answer


 


2
 You must be logged in to vote



 
All reactions





0 replies








Answer selected by
[Aliserag](/Aliserag)










[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Forgs%2Fonflow%2Fdiscussions%2F1330)




Category

[

Developer Tooling](/orgs/onflow/discussions/categories/developer-tooling)



Labels

None yet


5 participants

[![@austinkline](https://avatars.githubusercontent.com/u/8711160?s=48&v=4)](/austinkline) [![@turbolent](https://avatars.githubusercontent.com/u/51661?s=48&v=4)](/turbolent) [![@franklywatson](https://avatars.githubusercontent.com/u/128842?s=48&v=4)](/franklywatson) [![@m-Peter](https://avatars.githubusercontent.com/u/1778965?s=48&v=4)](/m-Peter) [![@AmarildoGrembi](https://avatars.githubusercontent.com/u/8199202?s=48&v=4)](/AmarildoGrembi) 



 


Heading

 


Bold

 


Italic

 


Quote

 


Code

 


Link

---


 


Numbered list

 


Unordered list

 


Task list

---


 


Attach files

 


Mention

 


Reference

 
 


Menu
 

* Heading
* Bold
* Italic
* Quote
* Code
* Link
* Numbered list
* Unordered list
* Task list
* Attach files
* Mention
* Reference


 

# Select a reply





 


 Loading




  [Create a new saved reply](/settings/replies?return_to=1)



 
1
  reacted with thumbs up emoji

 
1
  reacted with thumbs down emoji

 
1
  reacted with laugh emoji

 
1
  reacted with hooray emoji

 
1
  reacted with confused emoji

 わ
1
  reacted with heart emoji

 
1
  reacted with rocket emoji

 
1
  reacted with eyes emoji






## Footer

漏 2025 GitHub,Inc.


### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information




You cant perform that action at this time.















